var ui={w:null,real:0,container:sui.gel("container"),id:null};var template=function(d,c,g,f){var a={icon:"",word:"",btn:"",card:'<li class="mui-table-view-cell">{%image%}</li>'};switch(ui.real){case 0:a.icon='<span class="mui-icon iconfont icon-dengdai"></span>';a.word="实名认证正在审核中";a.btn='<div class="btn_box"><button type="button" class="mui-btn mui-btn-warning mui-btn-block" data="btn">撤销</button></div>';break;case 1:a.icon='<span class="mui-icon iconfont icon-duigou"></span>';a.word="您已通过实名认证";break;case 2:a.icon='<span class="mui-icon mui-icon-close"></span>';a.word="实名认证未通过";a.btn='<div class="btn_box"><button type="button" class="mui-btn mui-btn-warning mui-btn-block" data="btn">重新认证</button></div>';break;default:break}if(ui.real==1){a.card=""}else{var e="";if(!sui.IsNullOrEmpty(g)){e+='<img src="'+g+'" class="card"  data-preview-src="" data-preview-group="1">'}if(!sui.IsNullOrEmpty(f)){e+='<img src="'+f+'" class="card"  data-preview-src="" data-preview-group="1">'}a.card=sui.IsNullOrEmpty(e)?"":a.card.replace("{%image%}",e)}var b=['<div class="content">'+a.icon+'<div class="word">'+a.word+"</div>",'</div><ul class="mui-table-view"><li class="mui-table-view-cell">姓名：'+d+"</li>",'<li class="mui-table-view-cell">身份证号码：'+c+"</li>"+a.card,"</ul>"+a.btn].join("");return b};(function(a){a.plusReady(function(){setTimeout(function(){ui.w=sui.wait("正在加载...");sui.request("User/GetRealName",{},true,function(d){if(d){var c=d.IsPass;if(c){var b={IdCardNo:d.ReturnDataTable[0].IdCardNo,Name:d.ReturnDataTable[0].Name,ImageFrontUrl:d.ReturnDataTable[0].ImageFrontUrl,ImageBackUrl:d.ReturnDataTable[0].ImageBackUrl};ui.id=d.ReturnDataTable[0].CertId;ui.real=d.ReturnDataTable[0].State;ui.container.innerHTML=template(b.Name,b.IdCardNo,b.ImageFrontUrl,b.ImageBackUrl);mui.previewImage();sui.closewait(ui.w)}else{sui.closewait(ui.w);a.toast(d.Desc)}}else{sui.closewait(ui.w);a.toast("无法连接到服务器，请检查网络是否连接！")}})},250)})})(mui);mui("#container").on("tap","button[data=btn]",function(){if(ui.real==0){var a=[{title:"确认",style:"destructive"}];plus.nativeUI.actionSheet({title:"确认要撤销吗?",cancel:"取消",buttons:a},function(b){if(b.index==1){ui.w=sui.wait("请稍候...");sui.post("User/CancelRealName",{certId:ui.id},function(e){if(e){var c=e.IsPass;if(c){var d=plus.webview.getWebviewById("info.html");if(d){d.evalJS("realFalse();")}sui.open("realName.html","realName.html",{});setTimeout(function(){var f=plus.webview.currentWebview();f.close("none",0)},500);mui.toast("撤销成功")}else{mui.toast(e.Desc)}sui.closewait(ui.w)}else{mui.toast("无法连接到服务器，请检查网络是否连接");sui.closewait(ui.w)}})}})}else{sui.open("realName.html","realName.html",{});setTimeout(function(){var b=plus.webview.currentWebview();b.close("none",0)},500)}});