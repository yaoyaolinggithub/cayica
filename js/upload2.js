function galleryImgs(e,b,c,d,a){plus.gallery.pick(function(k){for(var f in k.files){if(parseInt(f)+parseInt(c)>=a){mui.toast("图片张数已达到上限!");return}var h=Math.random().toString().split(".")[1];var g=document.createElement("a");var j=document.createElement("img");g.className="jiangli";g.id="small_"+h;g.innerHTML='<img src="'+k.files[f]+'" class="m-action-preview"/><span class="jiang">X</span>';j.src=k.files[f];j.id="real_"+h;document.getElementById(e).insertBefore(g,document.getElementById(e).firstChild);document.getElementById(b).appendChild(j);document.getElementById(d).style.display="block";document.getElementById(e).scrollLeft=0}},function(f){return},{filter:"image",multiple:true})}function getBase64Image(c){var d=document.createElement("canvas");var e=c.width,a=c.height,g=e/a;e=parseInt(c.width);a=parseInt(e/g);d.width=c.width;d.height=c.height;var b=d.getContext("2d");b.clearRect(0,0,e,a);b.drawImage(c,0,0,e,a);var f=d.toDataURL("image/jpeg",0.5);return f.replace(/^data:image\/(png|jpeg);base64,/,"")}function uploadBase64(c){var a=document.getElementById(c).getElementsByTagName("img");var b="";for(var d=0;d<a.length;d++){b=b+getBase64Image(a[d])+"$"}return b.substring(0,b.length-1)}var compressImage=function(a,b,c){plus.zip.compressImage({src:a,dst:b,quality:20,overwrite:true},function(){if(typeof(c)=="function"){c(b)}},function(d){if(typeof(c)=="function"){c(a)}})};var deleteTempFile=function(a){plus.io.resolveLocalFileSystemURL(a,function(b){b.remove(function(c){console.log("删除成功")},function(c){console.log("删除失败")})})};