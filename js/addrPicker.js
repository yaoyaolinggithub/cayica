var ui={cityData4:null,provicebox:sui.gel("provicebox"),citybox:sui.gel("citybox"),districtbox:sui.gel("districtbox"),roadbox:sui.gel("roadbox"),itemprovice:sui.gel("itemprovice"),itemcity:sui.gel("itemcity"),itemdistrict:sui.gel("itemdistrict"),itemroad:sui.gel("itemroad"),AreaPicker:sui.gel("AreaPicker"),otherAddr:sui.gel("otherAddr"),myAddr:sui.gel("myAddr"),sliderbox:sui.gel("sliderSegmentedControl"),pcdr:sui.gel("pcdr"),addrlen:0,tempArea:null,returnAddr:sui.gel("returnAddr"),addrId:null};var initDatas=function(a,g){ui.cityData4=JSON.parse(a.replace(/\'/ig,'"')||"[]");var h=JSON.parse(g.replace(/\'/ig,'"')||"[]");ui.addrlen=h.length;var d="";if(ui.addrlen&&sui.isLogin()){for(var e=0;e<ui.addrlen;e++){d+='<li class="mui-table-view-cell" data="addr" data-c="'+h[e].AreaCode+'" data-Id="'+h[e].Id+'"><span class="mui-icon iconfont icon-dizhi1"></span>'+h[e].Area+h[e].Address+'<span class="mui-icon mui-icon-checkmarkempty"></span></li>'}ui.myAddr.innerHTML=d;var m=ui.myAddr.querySelectorAll("li");var l=m.length;var m=ui.myAddr.querySelectorAll("li");var l=m.length;for(var b=0;b<l;b++){m[b].classList[ui.addrId==m[b].getAttribute("data-Id")?"add":"remove"]("sui-active")}ui.sliderbox.classList.add("mui-hidden");ui.pcdr.classList.add("mui-hidden");ui.otherAddr.classList.remove("mui-hidden");ui.myAddr.classList.remove("mui-hidden")}else{ui.otherAddr.classList.add("mui-hidden");ui.myAddr.classList.add("mui-hidden");ui.sliderbox.classList.remove("mui-hidden");ui.pcdr.classList.remove("mui-hidden")}var l=ui.cityData4.length;var f="";for(var c=0;c<l;c++){f+='<p class="sui-p "  data-v="'+ui.cityData4[c].value+'" data="provice" idx="'+c+'">'+ui.cityData4[c].text+'<span class="mui-icon mui-icon-checkmarkempty"></span></p>'}ui.itemprovice.innerHTML=f};(function(a){a.plusReady(function(){var b=plus.webview.currentWebview();ui.addrId=b.addrId;initDatas(localStorage.getItem("OnlineAreaList_cayica"),b.addressList)})})(mui);function checkAddr(c,d,b){var a=plus.webview.currentWebview().opener();if(a){a.evalJS('checkAddr("'+c+'","'+d+'","'+b+'");')}plus.webview.currentWebview().close()}mui(ui.pcdr).on("tap","p[data=provice]",function(){var j=this;var k=j.classList.contains("active");if(k){return false}else{var c=ui.itemprovice.querySelectorAll("p[data=provice]");var h=c.length;for(var a=0;a<h;a++){c[a].classList[j==c[a]?"add":"remove"]("sui-active")}var d=j.getAttribute("data-v");var f=j.innerText;var l=j.getAttribute("idx");ui.tempArea=f;var b=ui.cityData4[l].children;if(b&&b.length){ui.provicebox.innerText=f;ui.provicebox.classList.remove("mui-active");ui.districtbox.classList.add("mui-hidden");ui.roadbox.classList.add("mui-hidden");ui.citybox.classList.remove("mui-hidden");ui.citybox.classList.add("mui-active");ui.citybox.innerText="请选择";var g="";for(var e=0;e<b.length;e++){g+='<p class="sui-p"  data-v="'+b[e].value+'" data="city"  pidx="'+l+'"  idx="'+e+'">'+b[e].text+'<span class="mui-icon mui-icon-checkmarkempty"></span></p>'}ui.itemcity.innerHTML=g;ui.itemprovice.classList.remove("mui-active");ui.itemcity.classList.add("mui-active")}else{checkAddr(d,f,"")}}});mui(ui.pcdr).on("tap","p[data=city]",function(){var k=this;var l=k.classList.contains("active");if(l){return false}else{var c=ui.itemcity.querySelectorAll("p[data=city]");var h=c.length;for(var a=0;a<h;a++){c[a].classList[k==c[a]?"add":"remove"]("sui-active")}var d=k.getAttribute("data-v");var f=k.innerText;var m=k.getAttribute("idx");var j=k.getAttribute("pidx");var b=ui.cityData4[j].children[m].children;ui.tempArea+=f;if(b&&b.length){ui.citybox.innerText=f;ui.citybox.classList.remove("mui-active");ui.districtbox.classList.remove("mui-hidden");ui.districtbox.classList.add("mui-active");ui.districtbox.innerText="请选择";ui.roadbox.classList.add("mui-hidden");var g="";for(var e=0;e<b.length;e++){g+='<p class="sui-p"  data-v="'+b[e].value+'" data="district" pidx="'+j+'" idx="'+m+'" dx="'+e+'">'+b[e].text+'<span class="mui-icon mui-icon-checkmarkempty"></span></p>'}ui.itemdistrict.innerHTML=g;ui.itemcity.classList.remove("mui-active");ui.itemdistrict.classList.add("mui-active")}else{checkAddr(d,ui.tempArea,"")}}});mui(ui.pcdr).on("tap","p[data=district]",function(){var k=this;var l=k.classList.contains("active");if(l){return false}else{var n=ui.itemdistrict.querySelectorAll("p[data=district]");var g=n.length;for(var j=0;j<g;j++){n[j].classList[k==n[j]?"add":"remove"]("sui-active")}var b=k.getAttribute("data-v");var e=k.innerText;var m=k.getAttribute("idx");var h=k.getAttribute("pidx");var o=k.getAttribute("dx");var a=ui.cityData4[h].children[m].children[o].children;ui.tempArea+=e;if(a&&a.length){ui.districtbox.innerText=e;ui.districtbox.classList.remove("mui-active");ui.roadbox.classList.remove("mui-hidden");ui.roadbox.classList.add("mui-active");ui.roadbox.innerText="请选择";var f="";for(var c=0;c<a.length;c++){f+='<p class="sui-p"  data-v="'+a[c].value+'" data="road">'+a[c].text+"</p>"}ui.itemroad.innerHTML=f;ui.itemdistrict.classList.remove("mui-active");ui.itemroad.classList.add("mui-active")}else{checkAddr(b,ui.tempArea,"")}}});mui(ui.pcdr).on("tap","p[data=road]",function(){var b=this;var c=b.getAttribute("data-v");var a=b.innerText;ui.tempArea+=a;checkAddr(c,ui.tempArea,"")});ui.otherAddr.addEventListener("tap",function(){this.classList.add("mui-hidden");ui.myAddr.classList.add("mui-hidden");ui.sliderbox.classList.remove("mui-hidden");ui.pcdr.classList.remove("mui-hidden");ui.returnAddr.classList.remove("mui-hidden");ui.itemprovice.scrollTop=0;ui.itemcity.scrollTop=0;ui.itemdistrict.scrollTop=0;ui.itemroad.scrollTop=0});ui.returnAddr.addEventListener("tap",function(){this.classList.add("mui-hidden");ui.pcdr.classList.add("mui-hidden");ui.sliderbox.classList.add("mui-hidden");ui.myAddr.classList.remove("mui-hidden");ui.otherAddr.classList.remove("mui-hidden")});mui(ui.myAddr).on("tap","li[data=addr]",function(){var c=this;var d=ui.myAddr.querySelectorAll("li");var a=d.length;for(var b=0;b<a;b++){d[b].classList[c==d[b]?"add":"remove"]("sui-active")}checkAddr(c.getAttribute("data-c"),c.innerText,c.getAttribute("data-Id"))});