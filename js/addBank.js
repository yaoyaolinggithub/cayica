var ui={txtName:sui.gel("txtName"),bankName:sui.gel("bankName"),address:sui.gel("address"),openName:sui.gel("openName"),bankNo:sui.gel("bankNo"),btnAdd:sui.gel("btnAdd"),w:null,StatusCode:"",Desc:"",picker:null,areaPicker:null};(function(a){a.plusReady(function(){setTimeout(function(){ui.w=sui.wait("请稍候...");sui.request("User/GetName",{},true,function(e){if(e){var d=e.IsPass;if(d){ui.txtName.value=e.ReturnObject;sui.closewait(ui.w)}else{ui.StatusCode=e.StatusCode;if(ui.StatusCode=="S0011"){ui.txtName.value="实名认证审核中，点击查看";ui.Desc="实名认证审核中，无法添加银行卡"}else{if(ui.StatusCode=="S0012"){ui.txtName.value="实名认证未通过，点击查看";ui.Desc="实名认证审核未通过，无法添加银行卡"}else{if(ui.StatusCode=="S0014"){ui.txtName.value="未实名认证，马上去认证";ui.Desc="您还未实名认证，无法添加银行卡"}else{a.toast(e.Desc)}}}sui.closewait(ui.w)}}else{a.toast("无法连接到服务器，请检查网络是否连接");sui.closewait(ui.w)}})},250);ui.picker=new a.PopPicker();ui.picker.setData([{text:"中国银行"},{text:"中国工商银行"},{text:"中国建设银行"},{text:"中国农业银行"},{text:"招商银行"},{text:"平安银行"},{text:"交通银行"},{text:"中信银行"},{text:"浦发银行"},{text:"兴业银行"},{text:"北京银行"},{text:"广发银行"},{text:"上海银行"},{text:"宁波银行"},{text:"汇丰银行"},{text:"包商银行"},{text:"杭州银行"},{text:"东莞银行"},{text:"中国邮政储蓄银行"},{text:"中国民生银行"},{text:"中国光大银行"},{text:"上海农商银行"},{text:"北京农商银行"},{text:"广州农商银行"},{text:"东莞农村商业银行"}]);ui.bankName.addEventListener("tap",function(d){ui.picker.show(function(e){var f=e[0].text;if(f!="undefined"&&f!=undefined){ui.bankName.value=f}})},false);ui.areaPicker=new a.PopPicker({layer:2});ui.areaPicker.setData(cityData3);var b=document.querySelectorAll(".mui-poppicker-body");if(a.os.ios&&parseFloat(a.os.version)>8&&b){for(var c=0;c<b.length;c++){b[c].classList.add("ios-poppicker")}}ui.address.addEventListener("tap",function(d){ui.areaPicker.show(function(g){if(g[1]){var f=g[0].text;var e=g[1].text;if(f!="undefined"&&f!=undefined&&e!="undefined"&&e!=undefined){ui.address.value=f+e;ui.address.setAttribute("data-p",f);ui.address.setAttribute("data-c",e)}}else{var f=g[0].text;if(f!="undefined"&&f!=undefined){ui.address.value=f;ui.address.setAttribute("data-p",f);ui.address.setAttribute("data-c","")}}})},false);ui.txtName.addEventListener("tap",function(){if(ui.StatusCode=="S0014"){sui.open("realName.html","realName.html",{});setTimeout(function(){var d=plus.webview.currentWebview();d.close("none",0)},500)}else{if(ui.StatusCode=="S0011"||ui.StatusCode=="S0012"){sui.open("realState.html","realState.html",{});setTimeout(function(){var d=plus.webview.currentWebview();d.close("none",0)},500)}}});ui.btnAdd.addEventListener("tap",function(){var d={cardNo:ui.bankNo.value.trim(),bankName:ui.bankName.value.trim(),openBankName:ui.openName.value.trim(),province:ui.address.getAttribute("data-p").trim(),city:ui.address.getAttribute("data-c").trim()};if(ui.StatusCode=="S0011"||ui.StatusCode=="S0012"||ui.StatusCode=="S0014"){a.toast(ui.Desc);return}else{if(sui.IsNullOrEmpty(d.bankName)){a.toast("请选择银行名称");return}else{if(sui.IsNullOrEmpty(d.province)){a.toast("请选择开户行地址");return}else{if(sui.IsNullOrEmpty(d.openBankName)){a.toast("请输入开户行详细名称");return}else{if(sui.IsNullOrEmpty(d.cardNo)){a.toast("请输入银行卡号");return}}}}}ui.w=sui.wait("请稍候...");sui.post("Fund/AddBankCard",d,function(g){if(g){var e=g.IsPass;if(e){var f=plus.webview.getWebviewById("bankCardList.html");if(f){f.evalJS("refresh();")}setTimeout(function(){sui.closewait(ui.w);a.toast("添加成功");plus.webview.currentWebview().close()},300)}else{a.toast(g.Desc);sui.closewait(ui.w)}}else{a.toast("无法连接到服务器，请检查网络是否连接");sui.closewait(ui.w)}})})})})(mui);