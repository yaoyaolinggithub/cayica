var ui={txtName:sui.gel("txtName"),txtMobile:sui.gel("txtMobile"),address:sui.gel("address"),detailAddr:sui.gel("detailAddr"),btnSave:sui.gel("btnSave"),w:null,areaPicker:null,addressId:null,provice:null,city:null,district:null,road:null};(function(a){a.plusReady(function(){ui.areaPicker=new a.PopPicker({layer:4});setTimeout(function(){var b=plus.webview.currentWebview();ui.addressId=b.addrId;ui.w=sui.wait("请稍候...");sui.request("user/GetAddress",{addressId:ui.addressId},true,function(f){if(f){var e=f.IsPass;if(e){ui.txtName.value=f.ReturnObject.ShouHuoRen;ui.txtMobile.value=f.ReturnObject.Phone;ui.address.value=f.ReturnObject.Area;var h=f.ReturnObject.Guide.trim().split("^");var g=h.length;for(var d=0;d<g;d++){if(d==1&&h[1].trim()){ui.provice=h[1].trim()}else{if(d==2&&h[2].trim()){ui.city=h[2].trim()}else{if(d==3&&h[3].trim()){ui.district=h[3].trim()}else{if(d==4&&h[4].trim()){ui.road=h[4].trim()}}}}}ui.address.setAttribute("data",f.ReturnObject.AreaCode);ui.detailAddr.value=f.ReturnObject.Address;ui.areaPicker.setData(f.ReturnList);var c=document.querySelector(".mui-poppicker-body");if(a.os.ios&&parseFloat(a.os.version)>8&&c){c.classList.add("ios-poppicker")}}else{a.toast(f.Desc)}sui.closewait(ui.w)}else{a.toast("无法连接到服务器，请检查网络是否连接");sui.closewait(ui.w)}})},250);ui.address.addEventListener("tap",function(){ui.txtName.blur();ui.txtMobile.blur();ui.detailAddr.blur();setTimeout(function(){if(ui.provice&&ui.provice!="undefined"){ui.areaPicker.pickers[0].setSelectedValue(ui.provice)}if(ui.city&&ui.city!="undefined"){setTimeout(function(){ui.areaPicker.pickers[1].setSelectedValue(ui.city)},100)}if(ui.district&&ui.district!="undefined"){setTimeout(function(){ui.areaPicker.pickers[2].setSelectedValue(ui.district)},200)}if(ui.road&&ui.road!="undefined"){setTimeout(function(){ui.areaPicker.pickers[3].setSelectedValue(ui.road)},300)}ui.areaPicker.show(function(b){ui.provice=b[0].value;ui.city=b[1].value;ui.district=b[2].value;ui.road=b[3].value;if(b[1]&&b[2]&&b[3]&&ui.provice!=undefined&&ui.provice!="undefined"&&ui.city!=undefined&&ui.city!="undefined"&&ui.district!=undefined&&ui.district!="undefined"&&ui.road!=undefined&&ui.road!="undefined"){ui.address.value=b[0].text+b[1].text+b[2].text+b[3].text;ui.address.setAttribute("data",b[3].value)}else{if(b[1]&&b[2]&&ui.provice!=undefined&&ui.provice!="undefined"&&ui.city!=undefined&&ui.city!="undefined"&&ui.district!=undefined&&ui.district!="undefined"){ui.address.value=b[0].text+b[1].text+b[2].text;ui.address.setAttribute("data",b[2].value)}else{if(b[1]&&ui.provice!=undefined&&ui.provice!="undefined"&&ui.city!=undefined&&ui.city!="undefined"){ui.address.value=b[0].text+b[1].text;ui.address.setAttribute("data",b[1].value)}else{if(ui.provice!=undefined&&ui.provice!="undefined"){ui.address.value=b[0].text;ui.address.setAttribute("data",b[0].value)}}}}})},0)});ui.btnSave.addEventListener("tap",function(){var e=ui.txtName.value.trim();var f=ui.txtMobile.value.trim();var d=ui.address.value.trim();var g=ui.detailAddr.value.trim();var c=ui.address.getAttribute("data");if(sui.IsNullOrEmpty(e)){a.toast("请输入收货人姓名");return}else{if(sui.IsNullOrEmpty(f)){a.toast("请输入收货人手机号");return}else{if(sui.IsNullOrEmpty(d)){a.toast("请选择省、市、区");return}else{if(sui.IsNullOrEmpty(g)){a.toast("请输入详细地址");return}}}}ui.w=sui.wait("正在保存...");var b={flag:"edit",person:e,phone:f,areaName:d,areaCode:c,address:g,addressId:ui.addressId};sui.post("User/EditAddress",b,function(j){if(j){var h=j.IsPass;if(h){sui.closewait(ui.w);var i=plus.webview.getWebviewById("myAddress.html");if(i){i.evalJS("getAddr();")}mui.toast("保存成功");setTimeout(function(){plus.webview.currentWebview().close()},50)}else{mui.toast(j.Desc);sui.closewait(ui.w)}}else{mui.toast("无法连接到服务器，请检查网络是否连接");sui.closewait(ui.w)}})})})})(mui);