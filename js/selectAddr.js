var ui={addrManage:sui.gel("addrManage"),addAddr:sui.gel("addAddr"),container:sui.gel("container"),w:null,addrId:"",navbox:sui.gel("navbox")};var template=function(a){var b=['<li class="mui-table-view-cell" data="selected" data-v="'+a.Id+'" data-n="'+a.ShouHuoRen+'" data-p="'+a.Phone+'" data-addr="'+a.Area+a.Address+'" data-code="'+a.AreaCode+'"><div>'+a.ShouHuoRen+' <span class="mui-pull-right">'+a.Phone+"</span></div>",'<div class="address">'+(a.IsDefault?'<span class="red">[默认地址]</span>':"")+" "+a.Area+a.Address+"</div>",'<span class="mui-icon iconfont icon-duihao1 mui-pull-right  '+(a.IsSelected?"active":"")+'" ></span> </li>'].join("");return b};function getAddr(){sui.request("User/GetAddressList",{addressId:ui.addrId},true,function(g){if(g){var f=g.IsPass;if(f){var e=g.ReturnList.length;if(e>0){var c='<ul class="mui-table-view">';for(var d=0;d<e;d++){var a={Id:g.ReturnList[d].Id,ShouHuoRen:g.ReturnList[d].ShouHuoRen,Phone:g.ReturnList[d].Phone,Area:g.ReturnList[d].Area,Address:g.ReturnList[d].Address,IsDefault:g.ReturnList[d].IsDefault,IsSelected:g.ReturnList[d].IsSelected,AreaCode:g.ReturnList[d].AreaCode};var b=template(a);c+=b}c+="</ul>";ui.container.innerHTML=c;ui.navbox.classList.remove("mui-hidden");sui.closewait(ui.w)}else{var b=['<div class="none">','<span class="mui-icon iconfont icon-dizhi"></span>','<div class="addr">您还没有收货地址，赶紧去添加一个吧~</div></div>'].join("");ui.container.innerHTML=b;ui.navbox.classList.remove("mui-hidden");sui.closewait(ui.w)}}else{mui.toast(g.Desc);sui.closewait(ui.w)}}else{mui.toast("无法连接到服务器，请检查网络是否连接");sui.closewait(ui.w)}})}(function(a){if(a.os.ios){ui.container.classList.add("ios-scroll-bounce")}a.plusReady(function(){ui.addrId=plus.webview.currentWebview().addrId;setTimeout(function(){ui.w=sui.wait("请稍候...");getAddr()},250)})})(mui);ui.addrManage.addEventListener("tap",function(){sui.open("../my/myAddress.html","myAddress.html",{selectAddr:"selectAddr"})});ui.addAddr.addEventListener("tap",function(){sui.open("../my/addAddr.html","addAddr.html",{})});mui(ui.container).on("tap","li[data=selected]",function(){var c=this;var b={Id:c.getAttribute("data-v"),Name:c.getAttribute("data-n"),Phone:c.getAttribute("data-p"),Addr:c.getAttribute("data-addr"),code:c.getAttribute("data-code")};var a=plus.webview.currentWebview().opener();if(a){a.evalJS('selected("'+b.Id+'","'+b.Name+'","'+b.Phone+'","'+b.Addr+'","'+b.code+'")');setTimeout(function(){plus.webview.currentWebview().close()},100)}});