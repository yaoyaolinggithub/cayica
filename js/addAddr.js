var ui={txtName:sui.gel("txtName"),txtMobile:sui.gel("txtMobile"),address:sui.gel("address"),detailAddr:sui.gel("detailAddr"),btnSave:sui.gel("btnSave"),w:null,areaPicker:null,op:null,provice:null,city:null,district:null,road:null};(function(a){a.plusReady(function(){var b=plus.webview.currentWebview();ui.op=b.op;ui.areaPicker=new a.PopPicker({layer:4});setTimeout(function(){ui.w=sui.wait("请稍候...");sui.request("Passport/GetArea",{},true,function(e){if(e){var d=e.IsPass;if(d){ui.areaPicker.setData(e.ReturnList);var c=document.querySelector(".mui-poppicker-body");if(a.os.ios&&parseFloat(a.os.version)>8&&c){c.classList.add("ios-poppicker")}sui.closewait(ui.w)}else{a.toast(e.Desc);sui.closewait(ui.w)}}else{mui.toast("无法连接到服务器，请检查网络是否连接");sui.closewait(ui.w)}})},250);ui.address.addEventListener("tap",function(){ui.txtName.blur();ui.txtMobile.blur();ui.detailAddr.blur();setTimeout(function(){if(ui.provice&&ui.provice!="undefined"){ui.areaPicker.pickers[0].setSelectedValue(ui.provice)}if(ui.city&&ui.city!="undefined"){setTimeout(function(){ui.areaPicker.pickers[1].setSelectedValue(ui.city)},100)}if(ui.district&&ui.district!="undefined"){setTimeout(function(){ui.areaPicker.pickers[2].setSelectedValue(ui.district)},200)}if(ui.road&&ui.road!="undefined"){setTimeout(function(){ui.areaPicker.pickers[3].setSelectedValue(ui.road)},300)}ui.areaPicker.show(function(c){ui.provice=c[0].value;ui.city=c[1].value;ui.district=c[2].value;ui.road=c[3].value;if(c[1]&&c[2]&&c[3]&&ui.provice!=undefined&&ui.provice!="undefined"&&ui.city!=undefined&&ui.city!="undefined"&&ui.district!=undefined&&ui.district!="undefined"&&ui.road!=undefined&&ui.road!="undefined"){ui.address.value=c[0].text+c[1].text+c[2].text+c[3].text;ui.address.setAttribute("data",c[3].value)}else{if(c[1]&&c[2]&&ui.provice!=undefined&&ui.provice!="undefined"&&ui.city!=undefined&&ui.city!="undefined"&&ui.district!=undefined&&ui.district!="undefined"){ui.address.value=c[0].text+c[1].text+c[2].text;ui.address.setAttribute("data",c[2].value)}else{if(c[1]&&ui.provice!=undefined&&ui.provice!="undefined"&&ui.city!=undefined&&ui.city!="undefined"){ui.address.value=c[0].text+c[1].text;ui.address.setAttribute("data",c[1].value)}else{if(ui.provice!=undefined&&ui.provice!="undefined"){ui.address.value=c[0].text;ui.address.setAttribute("data",c[0].value)}}}}})},0)});ui.btnSave.addEventListener("tap",function(){var f=ui.txtName.value.trim();var g=ui.txtMobile.value.trim();var e=ui.address.value.trim();var h=ui.detailAddr.value.trim();var d=ui.address.getAttribute("data");if(sui.IsNullOrEmpty(f)){a.toast("请输入收货人姓名");return}else{if(sui.IsNullOrEmpty(g)){a.toast("请输入收货人手机号");return}else{if(sui.IsNullOrEmpty(e)){a.toast("请选择省、市、区");return}else{if(sui.IsNullOrEmpty(h)){a.toast("请输入详细地址");return}}}}ui.w=sui.wait("正在保存...");var c={flag:"add",person:f,phone:g,areaName:e,areaCode:d,address:h};sui.post("User/EditAddress",c,function(l){if(l){var j=l.IsPass;if(j){var i=l.ReturnObject;sui.closewait(ui.w);var k=plus.webview.currentWebview().opener();if(k){if(ui.op){k.evalJS('selected("'+i+'","'+f+'","'+g+'","'+(e+h)+'","'+d+'")')}else{k.evalJS("getAddr();")}}mui.toast("保存成功");setTimeout(function(){plus.webview.currentWebview().close()},50)}else{mui.toast(l.Desc);sui.closewait(ui.w)}}else{mui.toast("无法连接到服务器，请检查网络是否连接");sui.closewait(ui.w)}})})})})(mui);