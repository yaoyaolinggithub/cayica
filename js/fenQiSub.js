var ui={ws:null,embed:null,openlink:null,btnReturn:sui.gel("btnReturn"),closeLoad:sui.gel("closeLoad")};function plusReady(a){ui.ws=plus.webview.currentWebview();ui.embed=plus.webview.create(a,"embed",{top:(immersed+44)+"px",bottom:"0px",position:"dock",dock:"bottom",bounce:"vertical",bounceBackground:"#efeff4",decelerationRate:1,scrollIndicator:"none"});ui.ws.append(ui.embed);ui.embed.addEventListener("loaded",offBrowserLoading,false);ui.embed.addEventListener("loading",onBrowserLoading,false)}function openUrl(a){ui.embed.loadURL(a)}document.addEventListener("DOMContentLoaded",function(){if(embed){openUrl(openlink)}},false);function onBrowserLoading(){ui.closeLoad.classList.remove("lineLoadding");ui.closeLoad.classList.add("lineLoadding");ui.closeLoad.classList.remove("mui-hidden")}function offBrowserLoading(){ui.closeLoad.classList.add("mui-hidden")}function back(){var a=ui.embed.getURL();if(a&&~a.indexOf("auth/index.htm")){mui.toast("已经是授权首页");return}ui.embed.back()}(function(a){a.init({beforeback:function(){var b=plus.webview.currentWebview().opener();b.evalJS("refresh();")}});a.plusReady(function(){sui.request("User/InvokeZhiMaAuthorize",{},false,function(c){if(c){var b=c.IsPass;if(b){ui.openlink=c.ReturnObject;plusReady(ui.openlink)}else{mui.toast(c.Desc)}}else{mui.toast("无法连接到服务器，请检查网络是否连接！")}});ui.btnReturn.addEventListener("tap",function(){back()})})})(mui);