var ui={btnApply:sui.gel("btnApply"),container:sui.gel("container"),shares:{},Id:null,title:""};(function(a){a.init({gestureConfig:{longtap:true}});a.plusReady(function(){var b=plus.webview.currentWebview();ui.Id=b.Id;setTimeout(function(){var d=sui.gel("tapTitle");var c=sui.wait("请稍候...");sui.request("Home/EarnMoneyDetail",{id:ui.Id},true,function(f){if(f){var e=f.IsPass;if(e){ui.title=f.ReturnObject.Name;d.innerText=ui.title;var g=f.ReturnObject.EarnMethod;ui.container.innerHTML=f.ReturnObject.Introduction;if(g==1){ui.btnApply.classList.remove("mui-hidden");ui.container.style.paddingBottom="60px"}if(a.os.ios){ui.container.classList.add("ios-scroll-bounce");document.getElementById("safari").classList.remove("mui-hidden")}sui.closewait(c)}else{sui.closewait(c);a.toast(f.Desc)}}else{sui.closewait(c);a.toast("无法连接到服务器，请检查网络是否连接！")}});plus.share.getServices(function(g){if(g&&g.length>0){for(var f=0;f<g.length;f++){var e=g[f];ui.shares[e.id]=e}}},function(){a.toast("获取分享服务列表失败")})},250)})})(mui);var shareMessage=function(d,c,b){var h={extra:{scene:c}};var f=sui.shared()+"#/operation/mmcontent?id="+ui.Id;h.href=f;var a="我要赚钱";var g=ui.title;var e=ui.container.innerText;g=g.length>25?g.substring(0,25)+"...":g;e=e.length>30?e.substring(0,30)+"...":e;if(b==3){e=e+f}if(!sui.IsNullOrEmpty(e)){a=e}if(!sui.IsNullOrEmpty(g)){a=g}h.title=a;h.content=e==""?"来自擦一擦的分享："+f:e;h.thumbs=["_www/images/appicon.png"];h.pictures=["_www/images/appicon.png"];d.send(h,function(){},function(i){})};var shareAction=function(d,b,a){var c=null;if(!d||!(c=ui.shares[d])){mui.toast("无效的分享服务！");return}if(c.authenticated){shareMessage(c,b,a)}else{c.authorize(function(){shareMessage(c,b,a)},function(f){})}};function copyVal(f){if(plus.os.name=="Android"){var c=plus.android.importClass("android.content.Context");var a=plus.android.runtimeMainActivity();var d=a.getSystemService(c.CLIPBOARD_SERVICE);plus.android.invoke(d,"setText",f)}else{var b=plus.ios.importClass("UIPasteboard");var e=b.generalPasteboard();e.setValueforPasteboardType(f,"public.utf8-plain-text")}mui.toast("已复制到剪贴板")}mui("body").on("tap","a[class=share_li]",function(){var e=this;var b=parseInt(e.getAttribute("sid"));var d=sui.shared()+"#/operation/mmcontent?id="+ui.Id;var a=ui.title+"(分享自@擦一擦)。 "+d;if(b==4){var f=plus.messaging.createMessage(plus.messaging.TYPE_SMS);f.body=a;plus.messaging.sendMessage(f)}else{if(b==5){var f=plus.messaging.createMessage(plus.messaging.TYPE_EMAIL);f.body=a;plus.messaging.sendMessage(f)}else{if(b==6){plus.runtime.openURL(d)}else{if(b==7){copyVal(d)}else{var c=[{id:"weixin",ex:"WXSceneSession"},{id:"weixin",ex:"WXSceneTimeline"},{id:"qq"},{id:"sinaweibo"}];shareAction(c[b].id,c[b].ex,b)}}}}mui("#Share").popover("toggle")});ui.btnApply.addEventListener("tap",function(){sui.open("applyPartner.html","applyPartner.html",null)});mui(ui.container).on("tap","a",function(){var a=this.getAttribute("href");if(a){plus.runtime.openURL(a)}});mui(ui.container).on("longtap","a",function(){var a=this.getAttribute("href");if(a){copyVal(a)}});